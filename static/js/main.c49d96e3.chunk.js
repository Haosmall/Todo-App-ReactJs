(this["webpackJsonptodo-app"]=this["webpackJsonptodo-app"]||[]).push([[0],{133:function(e,t,c){},134:function(e,t,c){},143:function(e,t,c){"use strict";c.r(t);var n=c(0),s=c(14),a=c.n(s),o=(c(133),c(134),c(9)),r=c(17),i=c(4);var d=function(e){var t=e.children,c=e.showModal,s=e.setShowModal,a=Object(n.useRef)(),o=Object(r.useSpring)({opacity:c?1:0,top:c?"25%":"0%",config:{friction:10}});return c&&Object(i.jsx)("div",{className:"Modal",ref:a,onClick:function(e){e.target===a.current&&s(!1)},children:Object(i.jsx)(r.animated.div,{style:o,className:"container",children:t})})},j=c(20),l=c(171),u=c(193),b=c(116),O=c(169),m=c(170),f=c(178),h=c(179),x=c(180),p=function(e){var t=e.handleSubmit,c=e.heading,n=void 0!==c&&c,s=e.text,a=e.setText,o=e.day,r=e.setDay,d=e.time,p=e.setTime,v=e.todoProject,N=e.setTodoProject,S=e.projects,y=e.showButtons,g=void 0!==y&&y,k=e.setShowModal,T=void 0!==k&&k;return Object(i.jsx)(j.a,{utils:b.a,children:Object(i.jsxs)("form",{onSubmit:t,className:"TodoForm",children:[Object(i.jsxs)("div",{className:"text",children:[n&&Object(i.jsx)("h3",{children:n}),Object(i.jsx)("input",{type:"text",value:s,onChange:function(e){return a(e.target.value)},placeholder:"To do ...",autoFocus:!0})]}),Object(i.jsxs)("div",{className:"remind",children:[Object(i.jsx)(O.a,{}),Object(i.jsx)("p",{children:"Remind Me!"})]}),Object(i.jsxs)("div",{className:"pick-day",children:[Object(i.jsxs)("div",{className:"title",children:[Object(i.jsx)(m.a,{}),Object(i.jsx)("p",{children:"Choose a day"})]}),Object(i.jsx)(l.a,{value:o,onChange:function(e){return r(e)}})]}),Object(i.jsxs)("div",{className:"pick-time",children:[Object(i.jsxs)("div",{className:"title",children:[Object(i.jsx)(f.a,{}),Object(i.jsx)("p",{children:"Choose time"})]}),Object(i.jsx)(u.a,{value:d,onChange:function(e){return p(e)}})]}),Object(i.jsxs)("div",{className:"pick-project",children:[Object(i.jsxs)("div",{className:"title",children:[Object(i.jsx)(h.a,{}),Object(i.jsx)("p",{children:"Choose a project"})]}),Object(i.jsx)("div",{className:"projects",children:S.length>0?S.map((function(e){return Object(i.jsx)("div",{className:"project ".concat(v===e.name?"active":""),onClick:function(){return N(e.name)},children:e.name},e.id)})):Object(i.jsx)("div",{style:{color:"#ff0000"},children:"Please add a project before proceeding!"})})]}),g&&Object(i.jsxs)("div",{children:[Object(i.jsx)("div",{className:"cancel",onClick:function(){return T(!1)},children:Object(i.jsx)(x.a,{size:"40px"})}),Object(i.jsx)("div",{className:"confirm",children:Object(i.jsx)("button",{children:"+ Add to do"})})]})]})})},v=c(64),N=c(22),S=c.n(N),y=c(54);c(96);y.a.initializeApp({apiKey:"AIzaSyA583zKyrzkBTrGDNJ3fZRWVlBK7u8zNYQ",authDomain:"todo-app-a6d18.firebaseapp.com",projectId:"todo-app-a6d18",storageBucket:"todo-app-a6d18.appspot.com",messagingSenderId:"359467795559",appId:"1:359467795559:web:b62911217bf18edd6ec0c2"});var g=y.a;var k=Object(n.createContext)();function T(e){var t=e.children,c="Today",s=Object(n.useState)(c),a=Object(o.a)(s,2),r=a[0],d=a[1],j=Object(n.useState)(void 0),l=Object(o.a)(j,2),u=l[0],b=l[1],O=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),c=t[0],s=t[1];return Object(n.useEffect)((function(){console.log("useEffect called");var e=g.firestore().collection("todos").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(v.a)({id:e.id},e.data())}));console.log("unsubscrible"),s(t)}));return function(){e()}}),[]),c}(),m=function(e,t){var c=Object(n.useState)([]),s=Object(o.a)(c,2),a=s[0],r=s[1];return Object(n.useEffect)((function(){var c=e.map((function(e){return Object(v.a)({numOfTodos:t.filter((function(t){return t.projectName===e.name&&!t.checked})).length},e)}));r(c)}),[e,t]),a}(function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),c=t[0],s=t[1];return Object(n.useEffect)((function(){var e=g.firestore().collection("projects").onSnapshot((function(e){var t=e.docs.map((function(e){return{id:e.id,name:e.data().name}}));s(t)}));return function(){return e()}}),[]),c}(),O),f=function(e,t){var c=Object(n.useState)([]),s=Object(o.a)(c,2),a=s[0],r=s[1];return Object(n.useEffect)((function(){var c,n=S()().format("DD/MM/YYYY");c="Today"===t?e.filter((function(e){return e.date===n})):"Next 7 days"===t?e.filter((function(e){var t=S()(e.date,"DD/MM/YYYY"),c=S()(n,"DD/MM/YYYY"),s=t.diff(c,"days");return s>=0&&s<7})):"All days"===t?e:e.filter((function(e){return e.projectName===t})),r(c)}),[e,t]),a}(O,r);return Object(i.jsx)(k.Provider,{value:{defaultProject:c,selectedProject:r,setSelectedProject:d,todos:f,projects:m,selectedTodo:u,setSelectedTodo:b},children:t})}var w=["Today","Next 7 days","All days"],C=c(90),M=c.n(C);var Y=function(){var e=Object(n.useContext)(k),t=e.projects,c=e.selectedProject,s=Object(n.useState)(!1),a=Object(o.a)(s,2),r=a[0],j=a[1],l=Object(n.useState)(""),u=Object(o.a)(l,2),b=u[0],O=u[1],m=Object(n.useState)(new Date),f=Object(o.a)(m,2),h=f[0],x=f[1],v=Object(n.useState)(new Date),N=Object(o.a)(v,2),g=N[0],T=N[1],C=Object(n.useState)(c),Y=Object(o.a)(C,2),D=Y[0],P=Y[1];return Object(n.useEffect)((function(){P(c)}),[c]),Object(i.jsxs)("div",{className:"AddNewTodo",children:[Object(i.jsx)("div",{className:"btn",children:Object(i.jsx)("button",{onClick:function(){return j(!0)},children:"+ New Todo"})}),Object(i.jsx)(d,{showModal:r,setShowModal:j,children:Object(i.jsx)(p,{handleSubmit:function(e){e.preventDefault(),b&&!w.includes(D)&&(y.a.firestore().collection("todos").add({text:b,date:S()(h).format("DD/MM/YYYY"),day:S()(h).format("d"),time:S()(g).format("hh:mm A"),projectName:D,checked:!1,color:M()({luminosity:"dark"})}),j(!1),O(""),T(new Date),x(new Date))},heading:"Add a new to do!",text:b,setText:O,day:h,setDay:x,time:g,setTime:T,todoProject:D,setTodoProject:P,projects:t,showButtons:!0,setShowModal:j})})]})},D=c(181),P=c(182);var E=function(){var e=Object(n.useState)(!0),t=Object(o.a)(e,2),c=t[0],s=t[1],a=Object(n.useContext)(k).setSelectedProject,d=Object(r.useSpring)({transform:c?"rotate(0deg)":"rotate(180deg)",config:{friction:15}}),j=Object(r.useSpring)({display:c?"block":"none",lineHeight:c?1.2:0});return Object(i.jsxs)("div",{className:"Calendar",children:[Object(i.jsxs)("div",{className:"header",children:[Object(i.jsxs)("div",{className:"title",children:[Object(i.jsx)(D.a,{size:"18"}),Object(i.jsx)("p",{children:"Calendar"})]}),Object(i.jsx)(r.animated.div,{style:d,onClick:function(){return s(!c)},className:"btns",children:Object(i.jsx)("span",{children:Object(i.jsx)(P.a,{size:"20"})})})]}),Object(i.jsx)(r.animated.div,{style:j,className:"items",children:w.map((function(e){return Object(i.jsx)("div",{className:"item",onClick:function(){return a(e)},children:e},e)}))})]})};var z=function(){var e=Object(n.useContext)(k),t=e.selectedTodo,c=e.projects,s=Object(n.useState)(""),a=Object(o.a)(s,2),r=a[0],d=a[1],j=Object(n.useState)(new Date),l=Object(o.a)(j,2),u=l[0],b=l[1],O=Object(n.useState)(new Date),m=Object(o.a)(O,2),f=m[0],h=m[1],x=Object(n.useState)(),v=Object(o.a)(x,2),N=v[0],y=v[1];return Object(n.useEffect)((function(){t&&(d(t.text),b(S()(t.date,"DD/MM/YYYY")),h(S()(t.time,"hh:mm A")),y(t.projectName))}),[t]),Object(n.useEffect)((function(){t&&g.firestore().collection("todos").doc(t.id).update({text:r,date:S()(u).format("DD/MM/YYYY"),day:S()(u).format("d"),time:S()(f).format("hh:mm A"),projectName:N})}),[r,u,f,N]),Object(i.jsx)("div",{children:t&&Object(i.jsxs)("div",{className:"EditTodo",children:[Object(i.jsx)("div",{className:"header",children:"Edit Todo"}),Object(i.jsx)("div",{className:"container",children:Object(i.jsx)(p,{handleSubmit:function(e){},text:r,setText:d,day:u,setDay:b,time:f,setTime:h,todoProject:N,setTodoProject:y,projects:c})})]})})};var A=function(e){var t=e.children;return Object(i.jsx)("div",{className:"Main",children:t})},B=c(186),I=c(183);var R=function(e){var t=e.handleSubmit,c=e.heading,n=e.value,s=e.setValue,a=e.setShowModal,o=e.confirmButonText;return Object(i.jsx)("div",{className:"ProjectForm",children:Object(i.jsxs)("form",{onSubmit:t,children:[Object(i.jsx)("h3",{children:c}),Object(i.jsx)("input",{value:n,onChange:function(e){return s(e.target.value)},type:"text",placeholder:"Project name",autoFocus:!0}),Object(i.jsx)("button",{className:"cancel",onClick:function(){return a(!1)},children:"Cancel"}),Object(i.jsx)("button",{className:"confirm",children:o})]})})},F=c(63);c(113);var L=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),c=t[0],s=t[1],a=Object(n.useState)(""),r=Object(o.a)(a,2),j=r[0],l=r[1];return Object(i.jsxs)("div",{className:"AddNewProject",children:[Object(i.jsxs)("div",{className:"add-button",children:[Object(i.jsx)("span",{onClick:function(){return s(!0)},children:Object(i.jsx)(I.a,{size:"20"})}),Object(i.jsx)(F.a,{})]}),Object(i.jsx)(d,{showModal:c,setShowModal:s,children:Object(i.jsx)(R,{handleSubmit:function(e){if(e.preventDefault(),j){var t=y.a.firestore().collection("projects");t.where("name","==",j).get().then((function(e){e.empty?t.add({name:j}):F.b.error("Project with the same name already exists!")})),l(""),s(!1)}},heading:"New project",value:j,setValue:l,setShowModal:s,confirmButonText:"+ Add Project"})})]})},V=c(184),H=c(185);var J=function(e){var t=e.project,c=e.setShowModal,s=Object(n.useState)(t.name),a=Object(o.a)(s,2),r=a[0],d=a[1],j=Object(n.useContext)(k),l=j.selectedProject,u=j.setSelectedProject,b=function(e,t){var c=g.firestore().collection("projects"),n=g.firestore().collection("todos"),s=e.name;c.where("name","==",t).get().then((function(a){a.empty?c.doc(e.id).update({name:t}).then((function(){n.where("projectName","==",s).get().then((function(e){e.forEach((function(e){e.ref.update({projectName:t})}))}))})).then((function(){s===l&&u(t)})):F.b.error("Project with the same name already exists!")}))};return Object(i.jsxs)("div",{className:"RenameProject",children:[Object(i.jsx)(R,{handleSubmit:function(e){e.preventDefault(),b(t,r),c(!1)},heading:"Edit project name",value:r,setValue:d,setShowModal:c,confirmButonText:"Confirm"}),Object(i.jsx)(F.a,{})]})};var K=function(e){var t=e.project,c=e.edit,s=Object(n.useContext)(k),a=s.defaultProject,j=s.selectedProject,l=s.setSelectedProject,u=Object(n.useState)(!1),b=Object(o.a)(u,2),O=b[0],m=b[1],f=Object(r.useSpring)({from:{marginTop:"-12px",opacity:0},to:{marginTop:"0px",opacity:1}}),h=Object(r.useTransition)(c,{from:{opacity:0,right:"-20px"},enter:{opacity:1,right:"0px"},leave:{opacity:0,right:"-20px"}});return Object(i.jsxs)(r.animated.div,{style:f,className:"Project",children:[Object(i.jsx)("div",{className:"name",onClick:function(){return l(t.name)},children:t.name}),Object(i.jsx)("div",{className:"btns",children:h((function(e,c){return c?Object(i.jsxs)(r.animated.div,{style:e,className:"edit-delete",children:[Object(i.jsx)("span",{className:"edit",onClick:function(){return m(!0)},children:Object(i.jsx)(V.a,{size:"13",color:""})}),Object(i.jsx)("span",{className:"delete",onClick:function(){return function(e){g.firestore().collection("projects").doc(e.id).delete().then((function(){g.firestore().collection("todos").where("projectName","==",e.name).get().then((function(e){e.forEach((function(e){e.ref.delete()}))}))})).then((function(){j===e.name&&l(a)}))}(t)},children:Object(i.jsx)(H.a,{size:"13",color:""})})]}):0===t.numOfTodos?"":Object(i.jsx)(r.animated.div,{style:e,className:"total-todos",children:t.numOfTodos})}))}),Object(i.jsx)(d,{showModal:O,setShowModal:m,children:Object(i.jsx)(J,{setShowModal:m,project:t})})]})};var G=function(){var e=Object(n.useState)(!0),t=Object(o.a)(e,2),c=t[0],s=t[1],a=Object(n.useState)(!1),d=Object(o.a)(a,2),j=d[0],l=d[1],u=j?"#0080ff":"#000000",b=Object(n.useContext)(k).projects,O=Object(r.useSpring)({transform:c?"rotate(0deg)":"rotate(180deg)",config:{friction:15}}),m=Object(r.useSpring)({display:c?"block":"none",lineHeight:c?1.2:0});return Object(i.jsxs)("div",{className:"Projects",children:[Object(i.jsxs)("div",{className:"header",children:[Object(i.jsxs)("div",{className:"title",children:[Object(i.jsx)(h.a,{size:"18"}),Object(i.jsx)("p",{children:"Projects"})]}),Object(i.jsxs)("div",{className:"btns",children:[c&&b.length>0&&Object(i.jsx)("span",{className:"edit",onClick:function(){return l((function(e){return!e}))},children:Object(i.jsx)(B.a,{size:"15",color:u})}),Object(i.jsx)(L,{}),Object(i.jsx)(r.animated.span,{className:"arrow",onClick:function(){return s(!c)},style:O,children:Object(i.jsx)(P.a,{size:"20"})})]})]}),Object(i.jsx)(r.animated.div,{style:m,className:"items",children:b.map((function(e){return Object(i.jsx)(K,{project:e,edit:j},e.id)}))})]})};var Q=function(e){var t=e.children,c=Object(n.useRef)(),s=Object(n.useContext)(k).setSelectedTodo;Object(n.useEffect)((function(){return document.addEventListener("click",a),function(){return document.removeEventListener("click",a)}}));var a=function(e){(e.target===c.current||c.current.contains(e.target))&&s(void 0)};return Object(i.jsx)("div",{className:"Sidebar",ref:c,children:t})},U=c(187),W=c(188),Z=c(189),q=c(190);var X=function(e){var t=e.todo,c=Object(n.useState)(!1),s=Object(o.a)(c,2),a=s[0],d=s[1],j=Object(n.useContext)(k),l=j.selectedTodo,u=j.setSelectedTodo,b=Object(r.useSpring)({from:{marginTop:"-12px",opacity:0},to:{marginTop:"0px",opacity:1}}),O=Object(r.useTransition)(t.checked,{from:{position:"absolute",transform:"scale(0)"},enter:{transform:"scale(1)"},leave:{transform:"scale(0)"}}),m=function(e){g.firestore().collection("todos").doc(e.id).delete()};return Object(i.jsx)(r.animated.div,{style:b,className:"Todo",children:Object(i.jsxs)("div",{className:"todo-container",onMouseEnter:function(){return d(!0)},onMouseLeave:function(){return d(!1)},children:[Object(i.jsx)("div",{className:"check-todo",onClick:function(){return function(e){g.firestore().collection("todos").doc(e.id).update({checked:!e.checked})}(t)},children:O((function(e,c){return c?Object(i.jsx)(r.animated.span,{style:e,className:"checked",children:Object(i.jsx)(U.a,{color:"#bebebe"})}):Object(i.jsx)(r.animated.span,{style:e,className:"unchecked",children:Object(i.jsx)(W.a,{color:t.color})})}))}),Object(i.jsxs)("div",{className:"text",onClick:function(){return u(t)},children:[Object(i.jsx)("p",{style:{color:t.checked?"#bebebe":"#000000"},children:t.text}),Object(i.jsxs)("span",{children:[t.time," - ",t.projectName]}),Object(i.jsx)("div",{className:"line ".concat(t.checked?"line-through":"")})]}),Object(i.jsx)("div",{className:"add-to-next-day",onClick:function(){return function(e){var t=S()(e.date,"DD/MM/YYYY").add(1,"days"),c=Object(v.a)(Object(v.a)({},e),{},{checked:!1,date:t.format("DD/MM/YYYY"),day:t.format("d"),color:M()({luminosity:"dark"})});delete c.id,g.firestore().collection("todos").add(c)}(t)},children:t.checked&&Object(i.jsx)("span",{children:Object(i.jsx)(Z.a,{})})}),Object(i.jsx)("div",{className:"delete-todo",onClick:function(){return function(e){m(e),l===e&&u(void 0)}(t)},children:(a||t.checked)&&Object(i.jsx)("span",{children:Object(i.jsx)(q.a,{})})})]})})};var $=function(e){var t=e.todos,c=Object(n.useState)([]),s=Object(o.a)(c,2),a=s[0],r=s[1];return Object(n.useEffect)((function(){var e=["0","1","2","3","4","5","6"].map((function(e){return{todos:t.filter((function(t){return t.day===e})),number:e}})),c=parseInt(S()().format("d"),10),n=e.slice(c).concat(e.slice(0,c));r(n)}),[t]),Object(i.jsx)("div",{className:"Next7Days",children:a.map((function(e){return Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{className:"day",children:[Object(i.jsxs)("div",{className:"name",children:[S()(e.number,"d").format("dddd"),e.number===S()().format("d")&&"(Today)"]}),Object(i.jsxs)("div",{className:"total-todos",children:["(",e.todos.length,")"]})]}),Object(i.jsx)("div",{className:"todos",children:e.todos.map((function(e){return Object(i.jsx)(X,{todo:e},e.id)}))})]},e.number)}))})};var _=function(){var e=Object(n.useContext)(k),t=e.todos,c=e.selectedProject;return Object(i.jsxs)("div",{className:"Todos",children:[Object(i.jsx)("div",{className:"selected-project",children:c}),Object(i.jsx)("div",{className:"todos",children:"Next 7 days"===c?Object(i.jsx)($,{todos:t}):t.map((function(e){return Object(i.jsx)(X,{todo:e},e.id)}))})]})},ee=c.p+"static/media/logo.fa5a0937.png";var te=function(){return Object(i.jsxs)("div",{className:"User",children:[Object(i.jsx)("div",{className:"logo",children:Object(i.jsx)("img",{src:ee,alt:"logo",className:"logo"})}),Object(i.jsxs)("div",{className:"info",children:[Object(i.jsx)("p",{children:"Hao Small"}),Object(i.jsx)("a",{children:"Logout"})]})]})};var ce=function(){return Object(i.jsxs)("div",{className:"App",children:[Object(i.jsxs)(Q,{children:[Object(i.jsx)(te,{}),Object(i.jsx)(Y,{}),Object(i.jsx)(E,{}),Object(i.jsx)(G,{})]}),Object(i.jsxs)(A,{children:[Object(i.jsx)(_,{}),Object(i.jsx)(z,{})]})]})};a.a.render(Object(i.jsx)(T,{children:Object(i.jsx)(ce,{})}),document.getElementById("root"))}},[[143,1,2]]]);
//# sourceMappingURL=main.c49d96e3.chunk.js.map